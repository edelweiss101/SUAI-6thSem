# 25. Формат JSON

> [◀️ К списку вопросов](../README.md#вопросы)

## Определение

JSON (JavaScript Object Notation) — текстовый формат обмена данными, основанный на синтаксисе JavaScript, но независимый от языка программирования. Используется для представления структурированных данных, их хранения и передачи между клиентом и сервером.

## Особенности

- **Легковесность**: компактный и читаемый формат.
- **Кроссплатформенность**: поддерживается большинством языков программирования (JavaScript, Python, PHP, Java и др.).
- **Читаемость**: данные представлены в виде пар "ключ-значение", легко воспринимаемых человеком.
- **Широкое применение**: используется в API, конфигурационных файлах, базах данных (например, MongoDB), AJAX-запросах.

## Структура и синтаксис

JSON состоит из двух основных структур:

1. **Объект**:
   - Заключен в фигурные скобки `{}`.
   - Содержит пары "ключ-значение", разделенные запятыми.
   - Ключи — строки в двойных кавычках, значения — строки, числа, булевы значения, массивы, объекты или `null`.
   - Пример:

     ```json
     {
         "name": "Анна",
         "age": 25,
         "isStudent": true
     }
     ```

2. **Массив**:
   - Заключен в квадратные скобки `[]`.
   - Содержит упорядоченный список значений (строки, числа, объекты, массивы, булевы значения, `null`).
   - Пример:

     ```json
     [
         {"id": 1, "name": "Иван"},
         {"id": 2, "name": "Мария"}
     ]
     ```

**Поддерживаемые типы данных**:

- Строка: `"текст"` (в двойных кавычках).
- Число: `42`, `3.14` (целые или дробные).
- Булев: `true`, `false`.
- Null: `null`.
- Объект: `{ "key": value }`.
- Массив: `[value1, value2]`.

## Правила синтаксиса

- Данные разделяются запятыми.
- Объекты используют `{}` для структуры, массивы — `[]`.
- Ключи в объектах всегда строки в двойных кавычках.
- Пробелы, отступы и переносы строк не влияют на структуру, но улучшают читаемость.
- Пример сложного JSON:

  ```json
  {
      "users": [
          {
              "id": 1,
              "name": "Анна",
              "contact": {
                  "email": "anna@example.com",
                  "phone": null
              },
              "active": true
          },
          {
              "id": 2,
              "name": "Иван",
              "contact": {
                  "email": "ivan@example.com",
                  "phone": "123-456-789"
              },
              "active": false
          }
      ],
      "count": 2
  }
  ```

## Использование JSON

1. **Передача данных в веб-приложениях**:
   - JSON используется в AJAX-запросах для обмена данными между клиентом и сервером.
   - Пример (JavaScript с Fetch API):

     ```javascript
     fetch('server.php')
         .then(response => response.json())
         .then(data => console.log(data.name));
     ```

2. **Обработка в языках программирования**:
   - **JavaScript**: `JSON.parse(string)` для преобразования строки JSON в объект, `JSON.stringify(object)` для обратного преобразования.

     ```javascript
     const jsonString = '{"name": "Анна", "age": 25}';
     const obj = JSON.parse(jsonString); // {name: "Анна", age: 25}
     const newString = JSON.stringify(obj); // '{"name": "Анна", "age": 25}'
     ```

   - **PHP**: `json_decode($string)` и `json_encode($array)`.

     ```php
     $json = '{"name": "Анна", "age": 25}';
     $array = json_decode($json, true); // массив ['name' => 'Анна', 'age' => 25]
     $newJson = json_encode($array); // '{"name": "Анна", "age": 25}'
     ```

   - **Python**: модуль `json`.

     ```python
     import json
     json_string = '{"name": "Анна", "age": 25}'
     data = json.loads(json_string)  # словарь {'name': 'Анна', 'age': 25}
     new_json = json.dumps(data)  # '{"name": "Анна", "age": 25}'
     ```

3. **Валидация и ошибки**:
   - JSON должен быть синтаксически корректным, иначе возникает ошибка (например, при использовании `JSON.parse`).
   - Используйте инструменты (например, JSONLint) для проверки корректности.

## Преимущества и ограничения

- **Преимущества**:
  - Простота и читаемость.
  - Компактность по сравнению с XML.
  - Широкая поддержка в языках и технологиях.
- **Ограничения**:
  - Нет поддержки комментариев.
  - Ограниченные типы данных (нет дат, функций).
  - Требует строгого соблюдения синтаксиса.

## Применение

- Хранение конфигураций (например, `config.json`).
- Передача данных через API (REST, GraphQL).
- Обмен данными в AJAX и WebSocket.
- Использование в NoSQL-базах данных (MongoDB, CouchDB).

> [◀️ К списку вопросов](../README.md#вопросы)
