# 26. XML. Основные понятия и конструкции языка

> [◀️ К списку вопросов](../README.md#вопросы)

## Определение

XML (Extensible Markup Language) — расширяемый язык разметки, предназначенный для хранения и передачи структурированных данных. Он используется для представления данных в текстовом формате, читаемом человеком и машиной.

## Основные понятия

- **Тег**: основная единица разметки, заключенная в угловые скобки `< >`. Теги бывают открывающими (`<tag>`) и закрывающими (`</tag>`).
- **Элемент**: состоит из открывающего тега, содержимого и закрывающего тега. Пример: `<name>Анна</name>`.
- **Атрибут**: дополнительная информация внутри тега, задается в формате `имя="значение"`. Пример: `<person id="1">`.
- **Иерархия**: XML-документ представляет дерево элементов с одним корневым элементом.
- **Корневой элемент**: единственный элемент, содержащий все остальные элементы документа.
- **CDATA**: секция для включения данных, которые не должны интерпретироваться как разметка. Пример: `<![CDATA[<text>]]>`.
- **Пространства имен**: используются для избежания конфликтов имен тегов. Задаются через атрибут `xmlns`. Пример: `xmlns:prefix="URI"`.

## Правила синтаксиса

- Документ должен иметь один корневой элемент.
- Теги чувствительны к регистру.
- Все теги должны быть закрыты (либо `</tag>`, либо самозакрывающиеся `<tag/>`).
- Атрибуты заключаются в кавычки (одинарные или двойные).
- Вложенность элементов должна быть корректной (без пересечений).
- Документ начинается с необязательной декларации XML: `<?xml version="1.0" encoding="UTF-8"?>`.

## Основные конструкции

1. **Декларация XML**:
   - Указывает версию XML и кодировку.
   - Пример:

     ```xml
     <?xml version="1.0" encoding="UTF-8"?>
     ```

2. **Корневой элемент**:
   - Обязательный элемент, содержащий все остальные.
   - Пример:

     ```xml
     <root>
         <!-- Дочерние элементы -->
     </root>
     ```

3. **Элементы и атрибуты**:
   - Элементы могут содержать текст, другие элементы или быть пустыми.
   - Пример:

     ```xml
     <person id="1">
         <name>Анна</name>
         <age>25</age>
     </person>
     ```

4. **Пространства имен**:
   - Избегают конфликтов имен тегов.
   - Пример:

     ```xml
     <root xmlns:ns="http://example.com">
         <ns:book>Программирование</ns:book>
     </root>
     ```

5. **CDATA**:
   - Для включения текста, содержащего специальные символы.
   - Пример:

     ```xml
     <description><![CDATA[<p>Текст с HTML</p>]]></description>
     ```

6. **Комментарии**:
   - Используются для пояснений.
   - Пример:

     ```xml
     <!-- Это комментарий -->
     ```

## Пример XML-документа

```xml
<?xml version="1.0" encoding="UTF-8"?>
<users>
    <user id="1">
        <name>Анна</name>
        <email>anna@example.com</email>
        <active>true</active>
    </user>
    <user id="2">
        <name>Иван</name>
        <email>ivan@example.com</email>
        <active>false</active>
    </user>
</users>
```

## Использование

- **Хранение данных**: XML используется в конфигурационных файлах, базах данных, API.
- **Обмен данными**: передача данных между системами (например, SOAP).
- **Связанные технологии**:
  - XSLT: для преобразования XML в другие форматы (например, HTML).
  - XSD: для определения структуры и типов данных XML.
- **Обработка**:
  - В JavaScript: DOMParser для парсинга XML.

    ```javascript
    const parser = new DOMParser();
    const xmlDoc = parser.parseFromString(xmlString, "application/xml");
    ```

  - В PHP: SimpleXML или DOMDocument.

    ```php
    $xml = simplexml_load_string($xmlString);
    echo $xml->user[0]->name; // Анна
    ```

  - В Python: модуль `xml.etree.ElementTree`.

    ```python
    import xml.etree.ElementTree as ET
    tree = ET.fromstring(xml_string)
    print(tree.find('user/name').text)  # Анна
    ```

## Преимущества и ограничения

- **Преимущества**:
  - Читаемость и структурированность.
  - Поддержка иерархий и сложных данных.
  - Широкая поддержка в языках и инструментах.
- **Ограничения**:
  - Более громоздкий по сравнению с JSON.
  - Требует строгого соблюдения синтаксиса.
  - Меньшая производительность при парсинге больших документов.

> [◀️ К списку вопросов](../README.md#вопросы)
