# 6. Написать серверный сценарий для получения записей из таблицы базы данных и отображения их на странице в форме списка

> [◀️ К списку вопросов](../README.md#практические_задания)

## Решение

Серверный сценарий реализуется с использованием PHP и MySQL для извлечения данных из таблицы базы данных и отображения их в виде HTML-списка (`<ul>`). Предполагается, что есть база данных `mydb` с таблицей `users`, содержащей столбцы `id`, `name` и `email`.

```php
<?php
// Параметры подключения к базе данных
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "mydb";

// Создание соединения
$conn = new mysqli($servername, $username, $password, $dbname);

// Проверка соединения
if ($conn->connect_error) {
    die("Ошибка подключения: " . $conn->connect_error);
}

// SQL-запрос для получения данных
$sql = "SELECT id, name, email FROM users";
$result = $conn->query($sql);

// Начало HTML-документа
echo '<!DOCTYPE html>
<html>
<head>
    <title>Список пользователей</title>
    <meta charset="UTF-8">
    <style>
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <h1>Список пользователей</h1>
    <ul>';

// Вывод данных
if ($result->num_rows > 0) {
    while ($row = $result->fetch_assoc()) {
        echo '<li>';
        echo 'ID: ' . htmlspecialchars($row['id']) . '<br>';
        echo 'Имя: ' . htmlspecialchars($row['name']) . '<br>';
        echo 'Email: ' . htmlspecialchars($row['email']);
        echo '</li>';
    }
} else {
    echo '<li>Нет данных</li>';
}

echo '</ul>
</body>
</html>';

// Закрытие соединения
$conn->close();
?>
```

## Описание

- **Подключение к базе данных**:
  - Используется `mysqli` для соединения с MySQL.
  - Параметры: `$servername`, `$username`, `$password`, `$dbname` (нужно настроить под конкретную базу данных).
- **SQL-запрос**:
  - Запрос `SELECT id, name, email FROM users` извлекает данные из таблицы `users`.
- **HTML-структура**:
  - Создается неупорядоченный список с тегами `<ul>` и `<li>`.
  - Каждый пользователь отображается в отдельном элементе `<li>` с полями `id`, `name`, `email`.
  - Заголовок `<h1>` и мета-тег `UTF-8` обеспечивают читаемость.
- **CSS**:
  - Список стилизуется без маркеров (`list-style-type: none`).
  - Элементы `<li>` имеют рамку, отступы и поля для визуальной читаемости.
- **PHP**:
  - Проверяется наличие данных (`$result->num_rows`).
  - Цикл `while` с `fetch_assoc()` извлекает строки результата.
  - Функция `htmlspecialchars` экранирует данные для защиты от XSS-атак.
  - Если данных нет, выводится сообщение "Нет данных".
- **Кодировка**: Указана `UTF-8` для корректного отображения русских символов.

## Результат

При открытии скрипта в браузере отобразится HTML-страница со списком пользователей. Пример вывода:

- ID: 1  
  Имя: Анна  
  Email: <anna@example.com>
- ID: 2  
  Имя: Иван  
  Email: <ivan@example.com>

Если таблица пуста, отобразится: "Нет данных".

## Замечания

- Для работы скрипта требуется сервер с PHP и MySQL, а также база данных `mydb` с таблицей `users`.
- Настройте параметры подключения (`$servername`, `$username`, `$password`, `$dbname`) под вашу базу данных.
- Для безопасности рекомендуется использовать подготовленные запросы (например, с PDO) для защиты от SQL-инъекций.
- Стили списка можно настроить для улучшения внешнего вида (например, добавить цвета или иконки).

> [◀️ К списку вопросов](../README.md#практические_задания)
